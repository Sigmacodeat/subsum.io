import type { Page } from '@playwright/test';

export let coreUrl = '';

export function setCoreUrl(url: string) {
  coreUrl = url;
}

export async function openHomePage(page: Page) {
  await page.goto(coreUrl || '/');
}

export async function open404Page(page: Page) {
  await page.goto(coreUrl ? `${coreUrl}/404` : '/404');
}

export async function confirmCreateJournal(page: Page) {
  const confirmButton = page.getByTestId('confirm-create-journal-button');
  await confirmButton.click();
}

export async function openJournalsPage(page: Page) {
  const { expect } = await import('@playwright/test');
  await page.getByTestId('slider-bar-journals-button').click();
  await confirmCreateJournal(page);
  await expect(
    page.locator('.doc-title-container:has-text("Today")')
  ).toBeVisible();
}
